name: 'Close stale issues'

on:
  schedule:
    - cron: '0 0 * * *' # Run daily at midnight UTC
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          # Issues
          days-before-issue-stale: 90
          days-before-issue-close: 7
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,enhancement,documentation'
          stale-issue-message: |
            ## This issue has been automatically marked as stale
            ## 此 Issue 已被自动标记为过期
            
            **English:**
            This issue has had no activity for 90 days and will be closed in 7 days if no further activity occurs.
            
            If this issue is still relevant:
            - Comment with an update
            - Provide additional information
            - Confirm you're still experiencing the problem
            
            **中文:**
            此 Issue 已 90 天无活动，如果继续无活动将在 7 天后关闭。
            
            如果此问题仍然相关：
            - 发表评论更新状态
            - 提供额外信息
            - 确认您仍在遇到该问题
            
            ---
            *This is an automated message. To prevent closure, simply comment on this issue.*
          close-issue-message: |
            ## This issue has been automatically closed
            ## 此 Issue 已被自动关闭
            
            **English:**
            This issue was automatically closed due to inactivity. If you're still experiencing this problem, please open a new issue with updated information.
            
            **中文:**
            此 Issue 因无活动而被自动关闭。如果您仍然遇到此问题，请开启一个新的 Issue 并提供最新信息。
          
          # Pull Requests
          days-before-pr-stale: 60
          days-before-pr-close: 14
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security'
          stale-pr-message: |
            ## This pull request has been automatically marked as stale
            ## 此 PR 已被自动标记为过期
            
            **English:**
            This pull request has had no activity for 60 days and will be closed in 14 days if no further activity occurs.
            
            If you're still working on this:
            - Push new commits
            - Comment with a status update
            - Request a review
            
            **中文:**
            此 PR 已 60 天无活动，如果继续无活动将在 14 天后关闭。
            
            如果您仍在处理此问题：
            - 推送新的提交
            - 发表评论更新状态
            - 请求审查
          close-pr-message: |
            ## This pull request has been automatically closed
            ## 此 PR 已被自动关闭
            
            **English:**
            This pull request was automatically closed due to inactivity. Feel free to reopen if you resume work on this.
            
            **中文:**
            此 PR 因无活动而被自动关闭。如果您恢复工作，请随时重新开启。
          
          # General settings
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true
